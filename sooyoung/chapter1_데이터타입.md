# 데이터타입

자바스크립트의 데이터 타입에는 크게 두가지가 있다. 기본 데이터 타입과 참조 데이터 타입이다.
기본형과 참조형이 서로 다르게 동작하는 이유를 이해하고 적절히 활용흐는게 목표

---


## 1. 데이터타입의 종류

기본형과 참조형으로 나눈다. 하지만 어떤 기준으로 구분하는걸까?
일반적으로 기본형은 할당이나 연산 시 복제되고 참ㅈ조형은 참조된다고 알려저 있다.

하지만 이것이 정확한 기준은 아니다. 엄밀히 말하면 둘 모두 복제를 하지만, 기본형은 값이 담긴 주솟값을 바로 복제하는 반면
참조형은 값이 담긴 주솟값들로 이루엊진 묶을을 가리키는 주솟값을 복제한다.

기본형은 불변성을 띕니다. 기본형인 숫자 10을 담은 변수 a에 다시 숫자 15를 담으면 a의 값은 문제 없이 15로 변하는데, 변하지 않는다는게 무슨의미일까?
불변성을 잘 이해하려면 메모리와 데이터에 대한 지식이 필요하고, `식별자`와 `변수`의 차이를 이해해야 한다.

### 1.1 메모리와 데이터

모든 데이터는 바이트 단위의 식별자, 더 정확하게 `메모리 주솟값`을 통해 서로 구분하고 연결할 수 있다.

`변수`와 `식별자`를 혼용하는 경우도 많다. 변수는 데이터를 담는 그릇이고, 식별자는 데이터를 가리키는 이름 즉 변수명이다.

#### 변수선언
```javascript
var a;
a = 'abc'
```
위를 말로 풀어쓰면 ***변할 수 있는 데이터를 만든다. 이 데이터의 식별자는 `a`로 한다.*** 가 된다.
변할 수 있는 데이터이니 선언할 때는 값이 없어도 된다. 이때 `undefined`가 할당된다.
이렇게 보면 변수란 결국 변경 가능한 데이터가 담길 수 있는 공간 또는 그릇이라는 것을 알 수 있다.

위를 바탕으로 컴퓨터가 어떻게 명령을 받아 메모리 영역에서 어떤 작업을 수행하는지 알아보자


> 변수 영역
>
> | 주소   | 1000              | 1001 |
> |------|-------------------|------|
> | 데이터  | 이름: a<br/>값:@5001 | ...  |

>
> 데이터 영역
> 
> | 주소   | 5000 | 5001 |
> |------|------|------|
> | 데이터  | ...  | 'abc' |

1. 변수 영역에서 빈 공간(@1000)을 확보한다.
2. 확보한 공간의 식별자를 a로 지정한다.
3. 데이터 영역에서 빈 공간(@5004)에 문자열 'abc'를 저장한다.
4. 변수 영역에서 a라는 식별자를 검색한다(@1000).
5. 앞서 저장한 문자열의 주소(@5001)를 @1000의 공간에 대입한다.


Q. 그냥 처음부터 값을 a 식별자가 있는 곳에 저장하면 편한거 아닌가?
물론 그게 지금 당장에는 편할 수 있지만, 이런 방법으로 데이터를 처리하면
데이터 변환을 자유롭게 할 수 있다는 장점이 있고,
또한 메모리를 훨씬 효율적으로 사용할 수 있기에 이런 방법으로 데이터를 처리합니다

만약, 이런 방법으로 처리하지 않고, 모든 변수에 모든 값이 저장이 된다고 하면
동일한 값을 갖는 변수라고 하더라도 개별 저장되기 때문에,
효율적으로 메모리를 관리할 수 없게 됩니다.

### 1.2 기본형 데이터와 참조형 데이터

#### 불변값
변수와 상수를 구분하는 성질은 `변경 가능성`이다. 불변값과 상수를 같은 개념으로 오해하기 쉽다.
변수와 상수를 구분 짓는 변경 가능성의 대상은 변수영역 메모리이다. 한번 데이터 할당이 이뤄진 변수공간에 다른 데이터를 재할당할 수 있는지 여부가 관건이다.
반면 불변성 여부를 구분할때 변경 가능성의 대상은 데이터 영역 메모리이다.

기본형 데이터인 숫자, 문자열, 불리언, null, undefined, 심볼은 모두 불변값이다.

```javascript
var a = 10;
a = 20;
```

위 코드에서 a는 10이라는 값을 가지고 있었다. 그리고 a에 20을 할당했다. 이때 a의 값은 10에서 20으로 변경되었다.
이때 a의 값이 변경되었지만, 10이라는 값은 변하지 않았다. a의 값이 10에서 20으로 변경되었을 뿐이다.
> 변수 영역
>
> | 주소   | 1000                        | 1001 |
> |------|-----------------------------|------|
> | 데이터  | 이름: a<br/>값: @5001 => @5002 | ...  |

>
> 데이터 영역
>
> | 주소   | 5000 | 5001 | 5002  |
> |------|------|------|-------|
> | 데이터  | ...  | 10   | 20    |


#### 가변값
참조형 데이터는 가변값이다. 객체, 배열, 함수는 모두 가변값이다. 가변값은 데이터 영역에 저장된 값이 변경 가능하다는 것을 의미한다.

```javascript
var obj = { 
    a: 1,
    b: 'bbb' 
};
```

> 변수 영역
>
> | 주소   | 1000                        | 1001 |
> |------|-----------------------------|------|
> | 데이터  | 이름: obj<br/>값: @5001 | ...  |

>
> 데이터 영역
>
> | 주소   | 5000 | 5001      | 5002 | 5003 |
> |------|------|-----------|------|-----|
> | 데이터  | ...  | @7103 ~ ? | 1    |'bbb'|
> 

> 객체 @5001의 변수영역
> 
> | 주소   | 7103              | 7104             | 7105 | 7106 |
> |------|-------------------|------------------|------|------|
> | 데이터  | 이름: a<br/>값:@5002 | 이름:b<br/>값:@5003 | ...  | ...  |
> 

1. 컴퓨터는 우선 변수 영역의 빈 공간(@1000)을 확보한다.
2. 확보한 공간의 식별자를 obj로 지정한다.
3. 데이터 영역에서 빈 공간(@5001)에 객체를 저장한다.
4. 객체의 주소(@5001)를 @1000의 공간에 대입한다.
5. 객체의 데이터 영역에서 빈 공간(@7103 ~ ?)에 데이터를 저장한다.
6. 객체의 데이터 영역에서 a와 b라는 식별자를 검색한다.
7. 앞서 저장한 데이터의 주소(@5002, @5003)를 @7103, @7104의 공간에 대입한다.


기본형 데이터와의 차이는 ***객체의 변수(프로퍼티) 영역*** 이별도로 존잰한다는 점이다.
객체가 별도로 할애한 영역은 변수 영역일 뿐 `데이터 영역`은 기존의 메모리 공간을 그대로 활용하고 있다. 데이터 영역에 저장된 값은 모두 불변값이다. 그러나 변수에는 다른 값을 얼마든지 대일할 수 있다. 바로 이 부분 때문에 흔히 참조형 데이터는 불변하지 않다라고 하는 것이다.


```javascript
var obj = { 
    a: 1,
    b: 'bbb' 
};
obj.a = 2;
```
위와 같은 코드를 작성했을 때 어떻게 동작하는지 알아보자

> 변수 영역
>
> | 주소   | 1000                        | 1001 |
> |------|-----------------------------|------|
> | 데이터  | 이름: obj<br/>값: @5001 | ...  |

>
> 데이터 영역
>
> | 주소   | 5000 | 5001      | 5002 | 5003 | 5004 |
> |------|------|-----------|------|-----|------|
> | 데이터  | ...  | @7103 ~ ? | 1    |'bbb'|2     |
>

> 객체 @5001의 변수영역
>
> | 주소   | 7103              | 7104             | 7105 | 7106 |
> |------|-------------------|------------------|------|------|
> | 데이터  | 이름: a<br/>값:@5004 | 이름:b<br/>값:@5003 | ...  | ...  |
> 

초기화 하는 부분은 위와 같다. `obj.a`에 숫자 2를 할당하려고 한다. 데이터 영역에서 숫자 2를 검색하지만 검색 결과가 없으므로 빈공간이 @5004에 저장하고 이주소를 @7103에 대입한다. 하지만 변수 `obj`가 바라보고 있는 주소는 @5001로 변하지 않는다. 
여기에서 중요한 점은 `obj.a`에 2를 할당했지만, `obj`가 바라보고 있는 주소는 변하지 않았다는 것이다. 이것이 참조형 데이터의 특징이다.

이부분이 기본형 데이터와 참조형 데이터의 차이점이다. ***기본형은 값을 복사하고 참조형은 주솟값을 복사한다*** 라고 표현하는 곳이 많지만. 실제로는 어떤 데이터 타입이든 주솟값을 복사한다. 다만 기본형은 값이 담긴 주솟값을 복사하고 참조형은 값이 담긴 주솟값들로 이루어진 묶음을 가리키는 주솟값을 복사한다.


## 2. 얕은복사 vs 깊은복사
객체 데이터의 가변성 때문에 발생하는 문제를 해결하기 위해 `얕은복사`와 `깊은복사`를 사용한다.
얕은 복사는 객체를 복사할 때 객체의 주솟값만 복사하는 방법이다. 
깊은 복사는 객체의 주솟값을 복사하고, 객체의 프로퍼티들도 재귀적으로 복사하는 방법이다. 이러면 데이터 값이 독립적으로 관리된다.

## 3. undefined와 null
`undefined`와 `null`은 모두 값이 없음을 나타낸다. 하지만 의미하는 바가 다르다.
`undefined`는 변수를 선언했지만 값을 할당하지 않았을 때 나타난다. `null`은 개발자가 명시적으로 값이 없음을 나타내기 위해 사용한다.

## 4. 정리
- 데이터 타입은 기본형과 참조형으로 나눈다.
- 기본형은 불변값이고 참조형은 가변값이다.
- 기본형은 값이 담긴 주솟값을 복사하고 참조형은 값이 담긴 주솟값들로 이루어진 묶음을 가리키는 주솟값을 복사한다.
- 객체 데이터의 가변성 때문에 발생하는 문제를 해결하기 위해 얕은복사와 깊은복사를 사용한다.
- undefined와 null은 모두 값이 없음을 나타낸다. 하지만 의미하는 바가 다르다.

